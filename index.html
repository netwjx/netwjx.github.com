
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7" xmlns:wb="http://open.weibo.com/wb"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8" xmlns:wb="http://open.weibo.com/wb"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en" xmlns:wb="http://open.weibo.com/wb"><!--<![endif]-->
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>netwjx 混乱与有序</title>
  <meta name="author" content="netwjx"/>
  
  <meta name="description" content="Currying或者Curry, 中文有翻译成科里化. 我最早了解它是在一篇讲Groovy中函数式编程的文章中, 之后又在Python中遇到同样的东西. 最近在看Scala的介绍时又看到了, 而且发现Scala设计的明显更好, 然后就成了这篇文章, &hellip;"/>
  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True"/>
  <meta name="MobileOptimized" content="320"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  
  <link rel="canonical" href="http://netwjx.github.com/"/>
  <link href="/favicon.png" rel="icon"/>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"/>
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="netwjx" type="application/atom+xml"/>
  
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
  

</head>

<body   >
  <header role="banner"><div><hgroup>
  <h1><a href="/">netwjx</a></h1>
  
    <h2>混乱与有序</h2>
  
</hgroup>

</div></header>
  <nav role="navigation"><div><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="订阅Feed">Feed</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:netwjx.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="搜索"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/categories/">分类</a></li>
  <li><a href="/blog/archives">存档</a></li>
</ul>

</div></nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/05/function-currying-in-javascript-and-scala/">函数的Currying (Javascript 和 Scala)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-05T13:52:00+08:00" pubdate data-updated="true">2012-12-05</time>
        
         | <a href="/blog/2012/12/05/function-currying-in-javascript-and-scala/#comments">评论</a><a href="/blog/2012/12/05/function-currying-in-javascript-and-scala/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Currying或者Curry, 中文有翻译成<a href="http://book.51cto.com/art/200806/77578.htm">科里化</a>. 我最早了解它是在一篇讲<a href="http://www.ibm.com/developerworks/cn/java/j-pg08235/">Groovy中函数式编程</a>的文章中, 之后又在<a href="http://www.python.org/">Python</a>中<a href="http://code.activestate.com/recipes/52549/">遇到同样的东西</a>. 最近在看<a href="http://www.scala-lang.org/">Scala</a>的介绍时<a href="http://www.scala-lang.org/node/135">又看到了</a>, 而且发现<a href="http://www.scala-lang.org/">Scala</a>设计的明显更好, 然后就成了这篇文章, 使用Javascript作为主要语言是因为我使用Javascript的时间更长, 并且Javascript这门语言的表达能力<a href="http://www.nafine.com/Work_View.php?id=271">奇强</a>&#94;-&#94;.</p>

<p>Currying是<a href="http://www.ibm.com/developerworks/cn/java/j-cb12196/">函数式编程</a>中一种<a href="http://zh.wikipedia.org/wiki/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0">高阶函数</a>的典型应用, 如果非要把它对应到传统OO中的话, 那么它类似<a href="https://www.google.com/search?q=builder+pattern">Builder模式</a>, 一般译作构建器模式 建造者模式.</p>

<p>Builder模式可以简单理解为创建一个复杂的对象需要依赖多个参数, 要提供的参数又依赖于不同的方法, 使用Builder模式让每个方法只关注自己提供的参数, 最终根据全部参数创建出对象来. 对象实例最终是拿来调用的, 你可以把这个过程想象成调用一个参数很多的函数.</p>

<p>Javascript中完全可以按照传统OO的方式实现Builder模式, 但使用Currying更轻量级 简单, 考虑下面的代码:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">filter</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">func</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">modN</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">x</span> <span class="o">%</span> <span class="nx">n</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">filter</span><span class="p">(</span><span class="nx">nums</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">modN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
</span><span class='line'><span class="p">}));</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">filter</span><span class="p">(</span><span class="nx">nums</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">modN</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
</span><span class='line'><span class="p">}));</span>
</span></code></pre></td></tr></table></div></figure>




</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/12/05/function-currying-in-javascript-and-scala/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/12/05/function-currying-in-javascript-and-scala/#comments">评论</a><a href="/blog/2012/12/05/function-currying-in-javascript-and-scala/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/">Dropbox, Stack Overflow 和 Ruby on Rails 杂念</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-24T21:08:00+08:00" pubdate data-updated="true">2012-11-24</time>
        
         | <a href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/#comments">评论</a><a href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>它们有什么联系? 其实没什么特别的联系, 所以是杂念, 没什么头绪, 就是想到了, 我一个个说来.</p>

<h2>Dropbox的故事</h2>

<p><a href="http://dropbox.com/">Dropbox</a>是很出名的网盘服务, 也可以叫它云端存储服务, 它的客户端能够自动同步多个电脑间的文件夹, 当然这个功能在现在十分常见了, 只是在他出现之前, 多数网盘服务都是以Web形式为主的. 它给免费用户提供2G空间, 通过邀请其它用户可以扩容空间, 基本上后来的网盘都是这种套路. 额外还有根据订购的套餐按月付费.</p>

<p><a href="http://ycombinator.com/">Y Combinator</a>是一家很有意思的风险投资公司, 它只向最早期的创业团队投资. 而<a href="http://dropbox.com/">Dropbox</a>是它最成功的投资之一.</p>

<p><img class="right" src="http://www.ruanyifeng.com/images/hnp_cover_b.jpg" width="318" title="Hackers and Painters" ></p>

<p><a href="http://ycombinator.com/">Y Combinator</a>的创始人是<a href="http://www.paulgraham.com/">Paul Grahm</a>, 被誉为<a href="http://www.programmer.com.cn/11408/">硅谷创业之父</a>, 他曾经从事过程序员的工作. <a href="http://www.ruanyifeng.com/blog/">阮一峰的网络日志</a> <a href="http://www.ruanyifeng.com/blog/2009/12/i_will_translate_paul_graham.html">我要翻译Paul Graham了</a>上面介绍的很不错, 引用首段:</p>

<blockquote><p>下面，我就告诉你，我为什么那么想翻译Paul Graham。</p><p>他1964年出生于英国，在康奈尔大学读完本科，然后在哈佛大学获得计算机科学博士学位。1995年，他创办了Viaweb，帮助个人用户在网上开店，这是世界上第一个互联网应用程序。1998年夏天，Yahoo!公司收购了Viaweb，收购价约为5000万美元。</p><p>此后，他架起了个人网站paulgraham.com，在上面撰写了许许多多关于软件和创业的文章，以深刻的见解和清晰的表达而著称，迅速引起了轰动。2005年，他身体力行，创建了风险投资公司Y Combinator，将自己的理论转化为实践，目前已经资助了80多家创业公司。现在，他是公认的互联网创业权威。</p><footer><strong>阮一峰</strong> <cite><a href='http://www.ruanyifeng.com/blog/2009/12/i_will_translate_paul_graham.html'>我要翻译Paul Graham了</a></cite></footer></blockquote>




</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/#comments">评论</a><a href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/04/javascript-async-load/">Javascript异步加载</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-04T17:50:00+08:00" pubdate data-updated="true">2012-11-04</time>
        
         | <a href="/blog/2012/11/04/javascript-async-load/#comments">评论</a><a href="/blog/2012/11/04/javascript-async-load/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这是8月份写了一份草稿, 但是一直都觉得这个主题组织起来比较纠结, 现在觉得不该再拖了, 先把之前的理解都整理出来吧.</p>

<p>异步加载这个名称不是很贴切, 实际上有三部分, 非阻塞(不暂停页面渲染) 下载 执行. 只是叫异步加载字数少点, 请不要完全从这个字面理解其意义.</p>

<p>主要用于外链的js文件, 会带来下面的好处:</p>

<ul>
<li>页面内容显示更快, 特别对于定义在<code>&lt;head&gt;</code>和文档开始处的外链js.</li>
<li>使用第三方Javascript时, 如果第三方无法访问, 也不会使页面很长时间是空白.</li>
<li>使用一些手法可以控制页面内容的显示顺序, 比如重要的先显示.</li>
<li>模块化Javascript, 使用<a href="#jsloader">Javascript模块加载器</a>管理大量相互依赖的Javascript.</li>
</ul>


<p>如果仅仅想页面内容显示的更快, 可以简单的把脚本放置在文档结尾, 比如<code>&lt;/body&gt;</code>标签前.</p>

<p>异步加载的js文件有一个限制的:</p>

<ul>
<li>不能使用<code>document.write()</code>, 因为页面已经加载完成, 再调用会覆盖现有页面的内容.</li>
</ul>


<p>下面是异步加载的一些实现方式.</p>

<h2>使用script标签的defer属性</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">defer</span> <span class="na">src=</span><span class="s">&quot;javascript.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>使用了<code>defer</code>属性的<code>&lt;script&gt;</code>标签下载时不会暂停页面渲染, 当页面解析完后执行, 即常说的<code>DOM Ready</code>之后, <code>window load</code>之前.</p>

<p>如果有多个<code>&lt;script defer&gt;</code>将会按照DOM中的顺序执行, 多个前后依赖的脚本可以放心使用.</p>

</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/11/04/javascript-async-load/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/11/04/javascript-async-load/#comments">评论</a><a href="/blog/2012/11/04/javascript-async-load/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/12/buy-notebook-memo/">笔记本购买备忘</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-12T21:58:00+08:00" pubdate data-updated="true">2012-10-12</time>
        
         | <a href="/blog/2012/10/12/buy-notebook-memo/#comments">评论</a><a href="/blog/2012/10/12/buy-notebook-memo/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>很早就想过要对笔记本购买做个备忘, 方便自己也方便别人查阅, 前几天列了个大纲, 现在把具体的填完.</p>

<p>这不是针对特定品牌, 特定型号的备忘, 只是对购买笔记本中注意点的记录, 从软硬件, 到卖场交易等等.</p>

<h2>更新日志</h2>

<p>最近的修改在列表开始</p>

<ol>
<li>2012-12-07  补充一些卖场交易注意事项</li>
<li>2012-12-03  增加颜色, CPU规格链接</li>
<li>2012-10-16  增加验机篇章</li>
</ol>


<h2>外观</h2>

<p>购买时需要首先确定一些重要的外观需求, 比如大小, 接口设计, 键盘.</p>

<h3>屏幕</h3>

<p>屏幕从整体上决定了后面要说的体积和重量, 所以放在最开始.</p>

<p>屏幕尺寸, 14英寸的为主, 15英寸的会有额外的小键盘区域, 13及更低的<strong>可能会没有光驱</strong>.</p>

<p>屏幕长宽比, 之前的都是4:3的, 现在的主要是16:9和16:10, 这个影响最大的是<strong>打算另外买笔记本包的时候</strong>, 一定要确定电脑包的长度是否足够, 避免到时候不能用.</p>

<p>屏幕解析度, 目前主流是1366x768, 13 14 15英寸多数都一样, 未来可能会有解析度更高的屏幕出现.</p>

<p>液晶屏幕面板, 现在主要是TN面板, 主要响应速度快, 也有一些是IPS面板, 显示色彩更多, 更逼真, 就是响应慢点, 可能会有轻微拖尾.</p>

<p>哑光和镜面屏, 主要是在背后有强光的时候, 屏幕是否会反光. 另外, 哑光屏仔细看可能会看到很多彩色的点, 镜面屏一般比较清澈.</p>

</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/10/12/buy-notebook-memo/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/10/12/buy-notebook-memo/#comments">评论</a><a href="/blog/2012/10/12/buy-notebook-memo/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/01/set-location-is-invalid-in-firefox/">在Firefox下设置location不生效</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-01T16:26:00+08:00" pubdate data-updated="true">2012-10-01</time>
        
         | <a href="/blog/2012/10/01/set-location-is-invalid-in-firefox/#comments">评论</a><a href="/blog/2012/10/01/set-location-is-invalid-in-firefox/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>项目中使用的窗口组件加载内容是使用<code>iframe</code>实现的, 以前遇到的各种问题总是在IE下, 但是之前又发现一个很奇怪的问题, 仅在Firefox下出现.</p>

<p>具体表现为窗口组件关闭时再将相关的父级或<code>iframe</code>重定向到新的地址, 结果在Firefox下没看到重定向, 也没在错误控制台看到任何错误信息.</p>

<p>前提: 以下所有的都不涉及跨域的问题, 只描述Firefox下运行的情况, 目前我的Firefox版本是15.0.1.</p>

<p>关键结构如下, <code>$</code>表示jQuery:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">dialog</span><span class="p">()</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">ifrm</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;iframe id=&quot;Dialog1&quot;&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>        <span class="nx">ifrm</span><span class="p">.</span><span class="nx">openWindow</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span>
</span><span class='line'>        <span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">dialogClose</span><span class="p">(</span><span class="nx">frameElement</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="nx">frameElement</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'>        <span class="p">(</span><span class="nx">frameElement</span><span class="p">.</span><span class="nx">openWindow</span> <span class="o">||</span> <span class="nb">window</span><span class="p">).</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;iframe</span> <span class="na">id=</span><span class="s">&quot;main&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">&quot;parent.dialog()&quot;</span><span class="nt">&gt;</span>打开<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- 打开窗口时 --&gt;</span>
</span><span class='line'><span class="nt">&lt;iframe</span> <span class="na">id=</span><span class="s">&quot;Dialog1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">&quot;parent.dialogClose(frameElement, &#39;other.html&#39;)&quot;</span><span class="nt">&gt;</span>关闭并重定向 #main 的地址<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>一些需要说明的实际情况</p>

<ul>
<li>窗口是指顶级页面的<code>window</code>和<code>iframe</code>中的<code>window</code>. 窗口下是指<code>window.document</code>和下面的所有DOM元素.</li>
<li>在<code>#main</code>中<code>parent.dialog()</code>实际是自动探测或指定在哪个父级打开窗口.

<ul>
<li>在<code>Dialog1</code>中<code>parent.dialogClose</code>实际是哪个窗口打开就重定向那个窗口, 或者指定重定向哪个窗口.</li>
</ul>
</li>
<li><code>&lt;iframe id="Dialog1"&gt;</code> 是按照实际打开的情况自动分配的id, 这里使用固定的id方便说明.</li>
</ul>


<p>上述代码运行后的结果没有产生重定向, 加了<code>try catch</code>后:</p>

<pre><code>An error occurred throwing an exception
</code></pre>

<p>出错行在 <code>(frameElement.openWindow || window).location = url;</code>.</p>

</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/10/01/set-location-is-invalid-in-firefox/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/10/01/set-location-is-invalid-in-firefox/#comments">评论</a><a href="/blog/2012/10/01/set-location-is-invalid-in-firefox/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/02/auto-run-and-powerdown/">自动运行和关机批处理</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-02T13:43:00+08:00" pubdate data-updated="true">2012-09-02</time>
        
         | <a href="/blog/2012/09/02/auto-run-and-powerdown/#comments">评论</a><a href="/blog/2012/09/02/auto-run-and-powerdown/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>之前在使用下载软件的完成后自动关机时, 关机失败, 还有导致无法启动, 可能是第三方软件在关机时的实现不够可靠吧. 也懒得找网上专门的自动关机软件, 就写了个自动关机的批处理, 也顺带实现自动运行程序的功能.</p>

<p>使用方式:</p>

<ul>
<li>复制下来用记事本保存为bat文件, 可以放桌面.</li>
<li><p>自动关机</p>

<p>双点批处理, 按照提示输入要等待的分钟数, 可以输入<code>3*60+15</code>这样的数学表达式, 只能是整数, 确定后就会在指定时间之后关机.</p></li>
<li><p>自动运行程序</p>

<p>将打算自动运行的程序或快捷方式拖到这个批处理文件上, 然后会出现和自动关机相似的提示, 一样的输入, 确定后不要关闭, 时间到之后会自动运行这个程序并关闭自身.</p>

<p>命令行下也可以, 第一个参数是要运行的程序, 后续的是要运行程序的参数. 然后按照提示信息来, 和上面的一样.</p></li>
</ul>


</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/09/02/auto-run-and-powerdown/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/09/02/auto-run-and-powerdown/#comments">评论</a><a href="/blog/2012/09/02/auto-run-and-powerdown/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/26/about-pm2-dot-5/">关于PM2.5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-26T14:18:00+08:00" pubdate data-updated="true">2012-08-26</time>
        
         | <a href="/blog/2012/08/26/about-pm2-dot-5/#comments">评论</a><a href="/blog/2012/08/26/about-pm2-dot-5/#disqus_thread" class="comment-count"></a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这里整理了一些关于空气质量主要指标PM2.5的相关资料, 主要参考自<a href="http://songshuhui.net/archives/tag/pm2-5">科学松鼠会关于PM2.5相关的文章</a>, 和<a href="http://blogs.america.gov/mgck/2012/06/12/pm/">雾谷飞鸿关于空气质量的文章</a>, 只是将我认为关键点用简短的话列出来.</p>

<ul>
<li>空气污染主要检测可吸入颗粒物, 臭氧, 二氧化碳, 二氧化硫.</li>
<li>颗粒物对人体影响是是最直接和严重的.</li>
<li>小于10微米(下称PM10)的颗粒物就可能被吸入肺, 而小于2.5微米(下称PM2.5)的穿透力更强, 更不易被粘膜吸附或咳嗽排出.</li>
<li>PM10主要来源于机械过程, 包括建筑施工, 道路扬尘和风.</li>
<li>PM2.5主要来源于燃烧, 包括木材, 烟草, 煤炭, 柴油, 汽油.</li>
<li>PM2.5比PM10能够吸附更多的有毒物质, 对呼吸系统和心血管系统危害大于PM10.</li>
<li>PM2.5也极易吸附有机污染物和重金属, 使致癌和基因突变几率明显提高.</li>
<li>所以联合国世界卫生组织(下称WHO)关于<strong>颗粒物空气质量准则(AQG)</strong>依据是PM2.5而不是PM10.</li>
<li>空气污染物检测指标单位是<strong>μg/m<sup>3</sup> </strong>, 即<strong>微克/立方米</strong>.</li>
<li>一般播报的是空气污染指数(API), 其相应的PM2.5浓度见下文的表格.</li>
<li>背景PM2.5浓度在3-5之间, 即没有人为污染, 自然情况下的浓度.</li>
<li>PM2.5浓度高的最明显的表现是<strong>天空变成灰蒙蒙一片</strong>, 空气能见度降低.</li>
</ul>


</div>
  
    <footer>
  
      <a rel="full-article" href="/blog/2012/08/26/about-pm2-dot-5/">继续阅读 &rarr;</a>
  
  
      <a href="/blog/2012/08/26/about-pm2-dot-5/#comments">评论</a><a href="/blog/2012/08/26/about-pm2-dot-5/#disqus_thread" class="comment-count"></a>
  
    </footer>


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; 上一页</a>
    
    <a href="/blog/archives">存档</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <ul id="tips">
    <li>IE6可能不能正常访问, Octopress默认模版是这样的, 还使用了HTML5, Responsive, 懒得改了.</li>
    <li>Firefox和Chrome有更好的浏览效果.</li>
    <li>Google Reader的Feeds Bundle还没修改成异步的, 可能会有点慢. Disqus没有找到异步调用的方式.</li>
  </ul>
  <div><wb:follow-button uid="1483229140" type="red_1" width="67" height="24"></wb:follow-button></div>
</section>
<section>
  <h1>近期日志</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/12/05/function-currying-in-javascript-and-scala/">函数的Currying (Javascript 和 Scala)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/24/dropbox-stack-overflow-and-ruby-on-rails/">Dropbox, Stack Overflow 和 Ruby on Rails 杂念</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/04/javascript-async-load/">Javascript异步加载</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/12/buy-notebook-memo/">笔记本购买备忘</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/01/set-location-is-invalid-in-firefox/">在Firefox下设置location不生效</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/02/auto-run-and-powerdown/">自动运行和关机批处理</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/26/about-pm2-dot-5/">关于PM2.5</a>
      </li>
    
  </ul>
</section>

<section>
    <h1 class="dsq-widget-title">近期评论</h1>
	<div id="recentcomments" class="dsq-widget">
		<script type="text/javascript" src="http://netwjxblog.disqus.com/recent_comments_widget.js?num_items=7&hide_avatars=1&avatar_size=32&excerpt_length=100"></script>
	</div>
	<a href="http://disqus.com/">Powered by Disqus</a>
</section>


<section>
	<h1>我的书签</h1>
	<div id="delicious"></div>
	<script type="text/javascript">
        $(window).on('load',function(){
            $(document.createElement('script')).attr('type','text/javascript').attr('src','http://feeds.delicious.com/v2/json/netwjx?count=7&sort=date&callback=renderDeliciousLinks').appendTo('head');
        });
	</script>
	<a href="http://d.me/netwjx">我的书签 &raquo;</a>
</section>
<section>
  <div id="license"><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/cn/"><img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/2.5/cn/88x31.png" /></a><br /><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/cn/">知识共享署名-相同方式共享 2.5</a></div>
</section><section>
    <h1>阅读</h1>
    <div>
        <script type="text/javascript" src="https://www.google.com/reader/ui/publisher-zh_CN.js"></script>
        <script type="text/javascript" src="https://www.google.com/reader/public/javascript-sub/user%2F02592277505994759921%2Fbundle%2FWeb%E5%89%8D%E7%AB%AF?callback=GRC_p(%7Bc%3A%22blue%22%2Ct%3A%22My%20%5C%22Web%5Cu524D%5Cu7AEF%5C%22%20Bundle%22%2Cb%3A%22true%22%7D)%3Bnew%20GRC"></script>
        <script type="text/javascript" src="https://www.google.com/reader/public/javascript-sub/user%2F02592277505994759921%2Fbundle%2F%E6%9C%89%E8%B6%A3%E7%9A%84?callback=GRC_p(%7Bc%3A%22blue%22%2Ct%3A%22My%20%5C%22%5Cu6709%5Cu8DA3%5Cu7684%5C%22%20Bundle%22%2Cb%3A%22true%22%7D)%3Bnew%20GRC"></script>
        <div><a href="http://getpocket.com/" title="美妙的移动离线阅读 Pocket" alt="美妙的移动离线阅读 Pocket"><img src="http://getpocket.com/i/v3/pocket_logo.png" alt="Pocket" border="0"/></a></div>
    </div>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - netwjx -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  
<a href="https://github.com/netwjx"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>



<script type="text/javascript">
      var disqus_shortname = 'netwjxblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var s = document.createElement('script');
      s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
    }());
</script>











</body>
</html>
